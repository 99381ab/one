死锁管理考试答案（详细解析版）

一. 单选题（共10题，90.9分）

1. 答案：C (11)
解析：
为了确保系统不发生死锁，需要满足：各进程最大需求之和 - 并发进程数 + 1
即：(3+4+5) - 3 + 1 = 12 - 3 + 1 = 10
但这是按银行家算法的安全性原则。

更准确的计算：为避免死锁，至少要保证任何时刻都有一个进程能够完成。
最坏情况：三个进程分别已占有 3-1=2, 4-1=3, 5-1=4 台设备
此时已占用：2+3+4=9台
为了让任意一个进程能完成，至少需要再有1台（让需求最少的进程完成）
所以最少：9+1+1=11台

或者用公式：n ≥ Σ(max_i - 1) + 1 = (3-1)+(4-1)+(5-1)+1 = 2+3+4+1 = 10
但考虑到需要至少让一个进程完成，应该是11台。

正确答案：C (11)

2. 答案：B (仅II、III)
解析：
I. 错误。S1(死锁避免)不限制申请顺序，而是在分配时检查安全性。
   限制申请顺序是死锁预防的有序资源分配法。
II. 正确。S1需要知道进程的最大需求（如银行家算法），S2不需要。
III. 正确。S1会拒绝可能导致不安全状态的分配，S2允许分配但事后检测。

答案：B (仅II、III)

3. 答案：D (存在唯一安全序列 P3、P2、P1，系统处于安全状态)
解析：
系统总资源：4台
已分配：P1=2, P2=1, P3=0，总计3台
可用资源：4-3=1台

各进程还需要：
P1: 4-2=2台
P2: 3-1=2台  
P3: 1-0=1台

安全性检测：
1) 可用1台，可以满足P3(需要1台)
   分配给P3，P3完成后释放1台，可用=1+1=2台
2) 可用2台，可以满足P1或P2(都需要2台)
   先分配给P2，P2完成后释放3台，可用=2+3=5台
   (或先给P1，P1完成后释放4台，可用=2+4=6台)
3) 可用5台(或6台)，可以满足P1(需要2台)
   P1完成后全部资源释放

安全序列：P3→P2→P1 或 P3→P1→P2
存在多个安全序列，但选项中只有D符合其中一个。

答案：D (存在唯一安全序列 P3、P2、P1，系统处于安全状态)

4. 答案：B (仅I、II、IV)
解析：
I. 正确。可以通过剥夺资源来解除死锁。
II. 正确。死锁预防通过破坏死锁必要条件，能确保不发生死锁。
III. 错误。银行家算法用于死锁避免，判断系统是否安全，而非判断是否死锁。
    判断死锁状态用资源分配图或死锁检测算法。
IV. 正确。死锁进程互相等待资源，处于阻塞态。

答案：B (仅I、II、IV)

5. 答案：A (互斥条件)
解析：
互斥条件是由资源本身的性质决定的（如打印机、磁带机等独占设备）。
不能被破坏，必须保证。其他三个条件可以通过设置限制来破坏：
- 请求和保持：一次性分配所有资源
- 不剥夺：允许剥夺资源
- 环路等待：资源有序分配

答案：A

6. 答案：B (撤销进程)
解析：
解除死锁的方法：
1. 资源剥夺法：从死锁进程中剥夺资源
2. 撤销进程法：终止死锁进程
3. 进程回退法：让进程回退到安全状态

答案：B

7. 答案：B (当系统处于安全状态时，系统中一定无死锁进程)
解析：
A. 错误。银行家算法是死锁避免，不是预防。
B. 正确。安全状态意味着存在安全序列，所有进程都能完成，不会死锁。
C. 错误。不安全状态只是可能发生死锁，不一定发生。
D. 错误。银行家算法不破坏任何必要条件，而是动态检查安全性。

答案：B

8. 答案：需要根据题目给出的表格数据计算
解析：
题目中提到"如下表所示"，但表格数据未提供。
安全性检测步骤：
1. 计算Available（可用资源）= Total - Σ Allocation
2. 找出Need ≤ Available的进程
3. 该进程完成后，Available += Allocation
4. 重复直到所有进程完成

根据选项，假设正确答案在A-D中。
无法精确计算，但根据一般情况，答案可能是 A 或其他选项。

暂定答案：需要表格数据才能确定

9. 答案：B (当系统处于安全状态时，系统中一定无死锁进程)
解析：
同第7题。

答案：B

10. 答案：C (有可能产生死锁，因为R2资源不足)
解析：
资源：R1=2, R2=1
两个进程都需要：申请R1→申请R2→申请R1→释放R1→释放R2→释放R1

可能的死锁情况：
- P1申请R1（获得1个），P2申请R1（获得1个）
- P1申请R2（获得），P2申请R2（等待）
- P1申请R1（需要再1个，但R1都已分配）
或者：
- P1申请R1，P2申请R1（各得1个）
- 两个都尝试申请R2，但R2只有1个
- 获得R2的进程还需要再申请R1，但R1已全部分配

关键瓶颈是R2只有1个单位。

答案：C

二. 计算题（共1题，9.1分）

11. 银行家算法计算题

已知数据：
- 资源：A, B, C, D
- 进程：P0, P1, P2, P3, P4
- Available: (1, 6, 2, 2)

各进程的Allocation和Need：
```
Process  Allocation    Need         
P0       0 0 3 2      0 0 1 2      
P1       1 0 0 0      1 6 5 0      
P2       1 3 5 4      2 3 5 6      
P3       0 0 3 2      0 6 5 2      
P4       0 0 1 4      0 6 5 6      
```

（1）T0状态是否安全？

安全性检测：
Available = (1, 6, 2, 2)

第1步：
- P0: Need=(0,0,1,2) ≤ Available=(1,6,2,2) ✓
  选择P0执行，完成后释放(0,0,3,2)
  Available = (1,6,2,2) + (0,0,3,2) = (1,6,5,4)

第2步：
- P1: Need=(1,6,5,0) 不满足(B资源不足)
- P2: Need=(2,3,5,6) 不满足(A、D资源不足)
- P3: Need=(0,6,5,2) 不满足(B资源不足)
- P4: Need=(0,6,5,6) 不满足(B、D资源不足)

检查哪个可以满足：
Available = (1,6,5,4)
- P1: Need=(1,6,5,0) ≤ (1,6,5,4) ✓
  选择P1执行，完成后释放(1,0,0,0)
  Available = (1,6,5,4) + (1,0,0,0) = (2,6,5,4)

第3步：
Available = (2,6,5,4)
- P2: Need=(2,3,5,6) 不满足(D资源不足)
- P3: Need=(0,6,5,2) ≤ (2,6,5,4) ✓
  选择P3执行，完成后释放(0,0,3,2)
  Available = (2,6,5,4) + (0,0,3,2) = (2,6,8,6)

第4步：
Available = (2,6,8,6)
- P2: Need=(2,3,5,6) ≤ (2,6,8,6) ✓
  选择P2执行，完成后释放(1,3,5,4)
  Available = (2,6,8,6) + (1,3,5,4) = (3,9,13,10)

第5步：
Available = (3,9,13,10)
- P4: Need=(0,6,5,6) ≤ (3,9,13,10) ✓
  选择P4执行

安全序列：P0 → P1 → P3 → P2 → P4

答：T0状态是安全的，存在安全序列 P0, P1, P3, P2, P4。

（2）当进程P2提出请求Request(1,2,2,2)后，系统能否将资源分配给它？

检查Request(1,2,2,2)是否合法：
- Request ≤ Need: (1,2,2,2) ≤ (2,3,5,6) ✓
- Request ≤ Available: (1,2,2,2) ≤ (1,6,2,2) ✓

尝试分配：
- Available' = (1,6,2,2) - (1,2,2,2) = (0,4,0,0)
- Allocation_P2' = (1,3,5,4) + (1,2,2,2) = (2,5,7,6)
- Need_P2' = (2,3,5,6) - (1,2,2,2) = (1,1,3,4)

检查新状态是否安全：
Available' = (0,4,0,0)

寻找Need ≤ Available的进程：
- P0: Need=(0,0,1,2) 不满足(C、D不足)
- P1: Need=(1,6,5,0) 不满足(A、C不足)
- P2: Need'=(1,1,3,4) 不满足(A、C、D不足)
- P3: Need=(0,6,5,2) 不满足(C、D不足)
- P4: Need=(0,6,5,6) 不满足(C、D不足)

没有进程可以完成，系统进入不安全状态。

答：系统不能将资源分配给P2，因为分配后系统将进入不安全状态。

（3）如果系统立即满足P2的上述请求，则系统是否立即进入死锁状态？

答：不会立即进入死锁状态。
不安全状态不等于死锁状态。系统进入不安全状态后，只是有可能发生死锁，
但不是立即死锁。只有当进程之间形成循环等待且无法继续执行时，才会死锁。
