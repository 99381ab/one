! Switch D (3560) - L3 Core
enable
configure terminal
hostname Switch-D

vlan 10
 name VLAN10
vlan 20
 name VLAN20
vlan 30
 name VLAN30
exit

interface vlan 10
 ip address 192.168.10.254 255.255.255.0
 no shutdown

interface vlan 20
 ip address 192.168.20.254 255.255.255.0
 no shutdown

interface vlan 30
 ip address 192.168.30.254 255.255.255.0
 no shutdown

ip routing

interface FastEthernet0/1
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk allowed vlan 10,20,30
 switchport nonegotiate
 spanning-tree portfast trunk
 spanning-tree bpduguard enable
 description Uplink-to-Access
 no shutdown

interface FastEthernet0/2
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk allowed vlan 10,20,30
 switchport nonegotiate
 spanning-tree portfast trunk
 spanning-tree bpduguard enable
 description Uplink-to-Access
 no shutdown

interface FastEthernet0/3
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk allowed vlan 10,20,30
 switchport nonegotiate
 spanning-tree portfast trunk
 spanning-tree bpduguard enable
 description Uplink-to-Access
 no shutdown

! Optional: shutdown unused ports (adjust as needed)
! interface range fastEthernet0/4 - 24
!  shutdown
! exit

end
write memory